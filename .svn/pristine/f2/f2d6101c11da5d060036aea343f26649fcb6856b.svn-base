<template>
	<div class="swiper-container ui_swiper_02_small_pic" id="smallPicDiv">
		<div class="swiper-wrapper">
			<div class="swiper-slide" v-for="(item, index) in smallPic">
				<div class="oc-item-small-pic">
					<div class="product-small-pic">
						<div class="product-image-small-pic">
							<a class="index_smallPic_imgBox-small-pic">
                <span class="index_smallPic_span-img-small-pic"></span>
                <img class="index_smallPic_img-small-pic" :src="smallPic && smallPic[index] && smallPic[index].bookUrl"  alt="暂无封面">
							</a>
							<div class="product-overlay-small-pic">
								<a  class="item-quick-view-small-pic w225" :href="(CONFIG.picLinkUrl)+(smallPic && smallPic[index] && smallPic[index].pubId)+'&contentType='+(smallPic && smallPic[index] && smallPic[index].contentType)+'&columnId=51'">
									<!--<i class="icon-zoom-in21-small-pic"></i>-->
									<span class="item-quick-view-word"> 查看详情</span>
								</a>
							</div>
						</div>
						<div class="product-desc-small-pic center">
							<div class="product-title-small-pic">
								<h3 class="product-title-h3-small-pic">
									<a class="product-title-h3-a-small-pic" :href="(CONFIG.picLinkUrl)+(smallPic && smallPic[index] && smallPic[index].pubId)+'&contentType='+(smallPic && smallPic[index] && smallPic[index].contentType)+'&columnId=51'">{{smallPic && smallPic[index] && smallPic[index].bookName}}</a>
								</h3>
							</div>
							<div class="product-author-small-pic">作者：{{smallPic && smallPic[index] && smallPic[index].bookAuthor}}</div>
							<div class="product-price-small-pic">
								<label class="product-price-word-small-pic">定价：</label>
								¥{{smallPic && smallPic[index] && smallPic[index].bookPrice}}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- 如果需要导航按钮 -->
		<div class="swiper-button-prev" id="swiper-button-prev-smallPic"></div>
		<div class="swiper-button-next" id="swiper-button-next-smallPic"></div>
	</div>
</template>
<script type="text/ecmascript-6">
	import SWIPER_SAMLLPIC from "projectConfig";
	import Swiper from 'swiper';
  import {Post} from "@common";

	export default {
		name: "ui_swiper_02_small_pic",
		reused: true,
		props: ["namespace"],
		data () {
			return {
        CONFIG:null,
				swiperInitFlag: false,
				smallPic: []
			}
		},
		mounted: function () {
			this.CONFIG = this.namespace ? SWIPER_SAMLLPIC[this.namespace].swiper.smallPic_02 : SWIPER_SAMLLPIC.swiper.smallPic_02;
			this.queryData();
		},
		methods: {
			queryData: function () {
				var obj = this;
        Post(this.CONFIG.url, this.CONFIG.params || {
							conditions: "[{pub_resource_type:'BOOK'}]",
							orderBy: "BOOK_PUBDATE desc",
							pageNo: "1",
							pageSize: "15",
							searchText: null
						}).then((rep) => {
          var datas = rep.data.result;
          var loadDatas = [];
          var message = {};
          for (var i = 0; i < datas.length; i++) {
            var entry = {
              bookName: datas[i].pub_resource_name || '暂无书名',
              bookPrice: datas[i].BOOK_PRICE || '暂无价格',
              bookAuthor: datas[i].BOOK_SYS_AUTHORS || '暂无作者',
              pubId: datas[i].id || 0,
              contentType: datas[i].pub_content_type || 0,
              bookUrl: datas[i].pub_picBig || ""
            };
            loadDatas.push(entry)
          }
          ;
          obj.smallPic = loadDatas;
          obj.$nextTick(obj.initSwiper);
				})
			},
			initSwiper: function () {
				var obj = this;
				if (!obj.swiperInitFlag) {
					obj.swiperInitFlag = true
					new Swiper(obj.$el, {
						slidesPerView: 4,
						spaceBetween: 30,
						preventClicksPropagation: true,
            observer:true,
            observeParents:true,
						pagination: {
							el: obj.$el.getElementsByClassName('swiper-pagination'),
							clickable: true,
						},
						navigation: {
							nextEl: obj.$el.getElementsByClassName('swiper-button-next'),
							prevEl: obj.$el.getElementsByClassName('swiper-button-prev'),
						},
					})

				}
			}
		}
	}
</script>

<style>
#swiper-button-prev-smallPic{
  top:35%
}
#swiper-button-next-smallPic{
  top:35%
}
.index_smallPic_img{
  display: inline-block!important;
}
.product{
  width: auto!important;
}



.oc-item-small-pic{
  width:auto;
  display:inline-block !important;
  display:inline;
}
.product-small-pic:hover .product-overlay-small-pic {
  top:183px;
  height: 46px;
  display: block;
}


.product-image-small-pic{
  width: 225px;
  height: 225px;
}
.index_smallPic_imgBox-small-pic{
  display:block;
  width: 225px!important;
  height: 225px!important;
}
.index_smallPic_img-small-pic{
  width: 225px;
  height:140px;
  display: inline-block;
  vertical-align: middle;
}
.index_smallPic_span-img-small-pic{
  height:42px;
  display:inline-block;
  vertical-align:middle;
}

.product-overlay-small-pic{
  position:absolute;
  left:0px;
  top:225px;
  width: 225px;
  height: 0px;
  display: none;
}
.item-quick-view-word{
  display: inline-block;
  width: 225px;
  height: 46px;
}
.item-quick-view-small-pic{
  display: block;
  float: left;
  width: 100%;
  font-size: 13px;
  color: #fff;
  background-color: #AE0F29;
  text-align: center;
}
.icon-zoom-in-small-pic{
  position: relative;
  top: 1px;
  font-size: 14px;
  vertical-align: middle;
  margin-right: 3px;
}

.item-quick-view-word{
  position: relative;
  top: 1px;
  font-size: 14px;
  vertical-align: middle;
  margin-right: 3px;
  line-height: 44px;
  vertical-align: middle;
}
.product-desc-small-pic{
  text-align :center;
  padding: 10px 0;
  font-size: 14px;
}



.product-title-small-pic{
  margin-bottom: 7px;
  box-sizing: border-box;

}
.product-title-h3-small-pic{
  margin: 0;
  font-size: 18px;
  font-weight: normal;
}
.product-title-h3-a-small-pic{
  color: #333;
}
.product-author-small-pic{
  font-size: 12px;
  color: #7F7F7F;
}
.product-price-small-pic{
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 4px;
  color: #000;
}
.product-price-small-pic > labell{
  font-weight: 400;
  font-size: 90%;
  color: #7F7F7F;
}
</style>
